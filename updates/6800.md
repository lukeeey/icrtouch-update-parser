# ICRTouch v68.00 - 10/10/2017

__Version ID__: 6800
<br>__Min Version ID__: 5411

## Release Notes
### MOD
- Removed the legacy floor plan and split checks dialogs
- UTF-8 support
- Lightly skinned PGM mode
- Country specific PGM mode keyboards
- EHP Server
- New Etal number delegate .toutf8() which converts to a UTF-8 character
- Added the ability to quickly jump between keyboard and main programming
- Added journal entries for when paying seats from the split check dialog
- Reason table entries can now be assigned a function key type so that reasons are only shown for that function
- Reason tables reports are sorted by function type
- Enabled reason table on the deposit key
- Removed the clerk setting "Allowed to use Void?" as it did nothing
- Reason table option and fixed totalisor for Customer Verification prompting
- Added support for field 'ENDATE' on the customer search dialog
- Added the ability to get IDCUPLOADED and IDCPENDING from ICR_GetSystemData()
- IDC Uploader can now download stock from TOW
- Added tax totals to Etal function ICR_GetClerkBuffer_Index()
- Support for TMT88V
- Support added for mouse interaction with Etal windows on VGA 2nd display
- Added support for Web PUTs from Etal
- 48 character alt text on PLUs
- online vouchers
- Added scrolling to the regions in split checks
- Added the ability to create vouchers from within Etal
- Added support for UTF8 characters from Local EFT App
- Added SET MENU SHIFT button that allows set menues to be shifted between number of courses
- Tax break down now prints on Check Tracking bills if cashed off using PocketTouch
- Better support for currencies that use high denominations
- PocketTouch now prints remotely finalised checks on the Socket Journal. Requires PocketTouch v1.42+ to work properly
- Changes made to stop TouchPoint from stripping the leading zero off of barcodes
- Etal function ICR_AttachWindow()
- XML Socket Command <PRINTING><PRINT>
- Services split up for hostnames; idc, webshop, touchtopup and touchpoint
- Changes made to better support HTTP GET where the content-length is not specified in the HTTP header and the length is greater than 10,000 bytes
- Added a flag to 'Set Price' mix and matches that makes them only activate if they actually result in a discount
- Etal - Added program alt type 44 for PLU List
- Code page support for Epson customer displays
- Added status key record to EATINTEXT for KV order sending
- Added Debug Zone 'CHECKLG'
- Added ICR_MakeNumberString() function 
- Version number format changed to be a little more modern
- Flag added to Print Control that means that duplicate bills can only be printed by a manager
- Added debug zone DCONNECT
- Time and Attendance log now automatically cleans up old data
- Added ICR_GetEmployeeLastTAOp() which allows access to employee clocking in/out data
- Running the Clocked In report as a Z now clocks out anyone that's left clocked in
- Disables Windows 10 edge gestures at startup
- Price embedded barcodes can now be entered against in a PLU in PGM3 in their raw format, ie with 0 price and check digit
-  The check index file understands about clerk's higher than 255
-  Keep alive packets for PocketTouch
-  TCP/IP CCTV Journal output added
-  Alt-text options for receipt printing
-  Enhancements made to KV output for better sorting
-  Added support for USB/RS232 E-jeton E715 RS232 C/D
-  Cash back on EFT account payments
-  Changes made to support Dallas Semiconductor iButton readers that don't have a serial number in them
- KV Store
- Text socket journal
- Changes made to the way that merged tables are sent to PocketTouch
- Added ICR_EncryptAES function
- Added ICR_CreatePBKDF2 function
- Changes made to better support storing of Clerk, Hourly and remote totalisors when checks and tables are finalised from PocketTouch
- First/Last sale fixed totalisers
- Added price level support to Webshop sales
- XML Socket commands GETPLUCUSTOMDATA & SETPLUCUSTOMDATA
- Added ICR_GetCustomPLUData and ICR_SetCustomPLUData functions
- Notification centre added to XML Socket
- UniqueSaleID now stored in check header index
- Some small improvements to KP printing to ensure that it was using the full width of the ticket
- NET Sale total can now be printed on the bottom of KP tickets
- Condiment qunatities are now printed on receipts
- Flag added to stop the till printing Qty for condiment items on receipt.  This will default to set when upgrading from older versions to mimick existing behaviour
- Batch reports that are incorrectly set to period 0 are changed to period 1 when the report is run
- New Etal function ICR_OutputLine
- Substituting an item on a Set Menu now also nets the totals for the parent plu of the set menu
- New fixed totaliser "SET MENU SUBST"
- Set menu defers now print on the journal
- The following keyboard shortcuts now work in Keyboard Programming: 
            (C)opy, (E)dit text, (M)erge, (V/P)aste, (R)edo, (S)plit, (T)ype, (U)ndo, Esc and Page Up/Down
- Splitting checks using the new dialog now moves tax totals from the original bill into the individual seats
- Changes made to allow arabic characters to be entered from the keyboard
- Weighted items are no longer consolidated on a receipt if the receipt is configured to do so
- Flag added to Print Control to stop reasons from printing on the receipt
- Tips are now removed from the Net Sales fixed total if done with a sale
- When KP printing same condiment items of a parent are now consolidated, condiment quantity must be set to print
- Customer balance changes that are sent in using the icr_comm.dll are now commited straight to disk
- Devices configured as "bluetooth" now attempt to close/reopen the serial port if it fails to communicate with it
- Added support for Bixolon SPP R210 bluetooth printer
- Support for Arabic RTL printing using code page 864 and supported printer
- New report - Tax Table Net - Which shows the taxabale total pre tax regardless of whether the system is configured for add-on or add-in tax
- New Etal event: OnWebResult(nID, nResultCode, szData, szType).  This replaces the old OnWebPostResult() which still exists.  Beware both events get called regardless of the web operation so only the newer type should be used
- When sales are split and paid without first storing and there are items pending for the KP then a KP ticket for those items for that seat is now generated
- Support for firing cash drawers through PocketTouch when they have a local printer configured
- Flag added to EFT control so that when using Verifone EFT the merchant copy ticket won't be printed
- Support removed for EFT Types Commidea, Verifone, YesPay, Thyron and WorldPay for licences over 88000
- Added tax analysis report

### FIX
- Weight PLUs now go into the dispense monitoring file with 3 dp
- Selecting 'no' to a PLU that prompted with a picture box still registered any condiment windows that were tied to that PLU
- Error correcting a premium % wasn't recorded correctly when sent up to TouchOffice Web
- Reval upload, customer balance uplift adjustment and cur exchange currency symbols 5 through to 10 would print incorrect symbol on some reports

## Files
- [Language File](https://www.icrtouch.com/updates/icrtouch/6800.Language.def.gz) (6800.Language.def.gz)
  - Target: skin\language.def
  - Version ID: 6800
  - Size: 31256
  - OS: All
- [Application](https://www.icrtouch.com/updates/icrtouch/6800.Boxes32.exe.gz) (6800.Boxes32.exe.gz)
  - Target: update.exe
  - Version ID: 6800
  - Size: 1695292
  - OS: Win32
- [Data layout file](https://www.icrtouch.com/updates/icrtouch/7612.datalyt.ini.gz) (7612.datalyt.ini.gz)
  - Target: datalyt.ini
  - Version ID: 7612
  - Size: 17112
  - OS: All
- [international keyboards](https://www.icrtouch.com/updates/icrtouch/6800.Country.xml.gz) (6800.Country.xml.gz)
  - Target: skin\Country.xml
  - Version ID: 6800
  - Size: 11941
  - OS: Win32

